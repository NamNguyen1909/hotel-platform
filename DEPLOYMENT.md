# Hotel Platform - Deployment Guide

## 🚀 Auto Deploy trên Render.com

### 📋 Yêu cầu trước khi deploy:

1. **Push code lên GitHub repository**
2. **Chuẩn bị Cloudinary account** (để lưu trữ hình ảnh)
3. **Tài khoản Render.com** (miễn phí)

### 🔧 Các bước deploy:

#### 1. **Kết nối Repository với Render**
- Đăng nhập vào [Render.com](https://render.com)
- Kết nối GitHub account
- Import repository `hotel-platform`

#### 2. **Render sẽ tự động đọc file `render.yaml`**
File này định nghĩa:
- **Database**: PostgreSQL database (miễn phí)
- **Backend**: Django API service  
- **Frontend**: React/Vite web service

#### 3. **Thiết lập Environment Variables**
Trong Render Dashboard, cấu hình các biến môi trường:

**Backend Environment Variables:**
```bash
# Tự động generate
SECRET_KEY=<auto-generated>
DATABASE_URL=<auto-generated-from-database>

# Cần cấu hình thủ công
DEBUG=False
ALLOWED_HOSTS=hotel-platform-api.onrender.com,hotel-platform-web.onrender.com,localhost,127.0.0.1
CORS_ALLOWED_ORIGINS=https://hotel-platform-web.onrender.com
CLOUDINARY_CLOUD_NAME=your-cloudinary-cloud-name
CLOUDINARY_API_KEY=your-cloudinary-api-key  
CLOUDINARY_API_SECRET=your-cloudinary-api-secret
```

**Frontend Environment Variables:**
```bash
VITE_API_BASE_URL=https://hotel-platform-api.onrender.com
NODE_ENV=production
```

#### 4. **Deploy Process**
Render sẽ tự động:
1. ✅ Tạo PostgreSQL database
2. ✅ Build Django backend với dependencies
3. ✅ Chạy migrations và seed data  
4. ✅ Build React frontend với Vite
5. ✅ Deploy và cấp subdomain miễn phí

### 🌐 URLs sau khi deploy:
- **🎯 Web Frontend**: `https://hotel-platform-web.onrender.com`
- **🔧 API Backend**: `https://hotel-platform-api.onrender.com`
- **👨‍💻 Admin Panel**: `https://hotel-platform-api.onrender.com/admin/`
- **📚 API Docs**: `https://hotel-platform-api.onrender.com/swagger/`

### 🔍 Monitoring & Logs:
- **Render Dashboard**: Xem logs, metrics, restart services
- **Health Checks**: Tự động kiểm tra service health
- **Auto Restart**: Tự động restart nếu service down

### ⚡ Performance Notes:
- **Free Tier**: Services có thể "sleep" sau 15 phút không hoạt động
- **Cold Start**: Khởi động lại có thể mất 30-60 giây
- **Upgrade**: Có thể upgrade để tránh sleeping

### 🛠️ Troubleshooting:

**Nếu build fail:**
1. Kiểm tra logs trong Render Dashboard
2. Đảm bảo `requirements.txt` và `package.json` đầy đủ
3. Kiểm tra environment variables

**Nếu database connection fail:**
1. Kiểm tra `DATABASE_URL` environment variable
2. Đảm bảo PostgreSQL service đang chạy

**Nếu CORS errors:**
1. Kiểm tra `CORS_ALLOWED_ORIGINS` settings
2. Đảm bảo frontend URL được cấu hình đúng

### 📚 Useful Commands:

**Force redeploy:**
```bash
git commit --allow-empty -m "Force redeploy"
git push origin main
```

**Local testing with production settings:**
```bash
# Backend
cd hotelplatformapi
export DEBUG=False
export DATABASE_URL=postgresql://...
python manage.py runserver

# Frontend  
cd hotelplatformweb-vite
export VITE_API_BASE_URL=https://hotel-platform-api.onrender.com
npm run build
npm run preview
```

---

## 🛡️ Security Checklist:

- ✅ `DEBUG=False` in production
- ✅ Secret key auto-generated
- ✅ CORS properly configured
- ✅ HTTPS enforced
- ✅ Static files optimized with WhiteNoise
- ✅ Database credentials secured
- ✅ Environment variables properly set

## 🎯 Kết quả:
Sau khi deploy thành công, bạn sẽ có:
- ✅ Hotel Platform API backend chạy trên Django + PostgreSQL
- ✅ React frontend với Material-UI responsive design
- ✅ Database với sample data sẵn sàng
- ✅ File upload qua Cloudinary
- ✅ JWT authentication system
- ✅ Admin panel đầy đủ tính năng
- ✅ API documentation với Swagger
- ✅ Auto SSL certificates

**🎉 Enjoy your deployed Hotel Platform! 🏨**
